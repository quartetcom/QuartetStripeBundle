machine:
  timezone: Asia/Tokyo
  php:
    version: 7.0.7

dependencies:
  cache_directories:
    - "~/.composer"
  override:
    # add circle.php.ini
    - cp circle.php.ini /opt/circleci/.phpenv/versions/$(phpenv global)/etc/conf.d/
    # install php dependencies
    - composer config github-oauth.github.com $GITHUB_OAUTH_TOKEN
    - SYMFONY_ENV=test composer install --no-interaction --no-progress

test:
  override:
    # run unit tests
    - ./vendor/bin/phpunit
